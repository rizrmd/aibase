{"id":"aibase-076","title":"Creating tenant in http://localhost:5040/admin-setup?tab=tenants fails","description":"## Bug Report\n\n**Location**: Admin Setup → Tenants tab\n**URL**: http://localhost:5040/admin-setup?tab=tenants\n\n### Problem\nTenant creation functionality is failing when attempting to create a new tenant through the admin interface.\n\n### Steps to Reproduce\n1. Navigate to http://localhost:5040/admin-setup?tab=tenants\n2. Attempt to create a new tenant\n3. Observe the failure\n\n### Expected Behavior\nTenant should be successfully created and added to the tenants list.\n\n### Actual Behavior\nThe tenant creation process fails.\n\n### Additional Context\n\n---\n\n**Created via**: `/beads:create` command\n**Priority**: P1 (High) - affects core admin functionality","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-21T22:54:36Z","created_by":"rizky","updated_at":"2026-01-22T06:09:33.700419+07:00","closed_at":"2026-01-22T06:09:33.700419+07:00","close_reason":"Closed"}
{"id":"aibase-086","title":"Creating tenant in http://localhost:5040/admin-setup?tab=tenants fails","description":"## Bug Report\n\n**Location**: Admin Setup → Tenants tab\n**URL**: http://localhost:5040/admin-setup?tab=tenants\n\n### Problem\nTenant creation functionality was failing when attempting to create a new tenant through the admin interface.\n\n### Root Cause\nThe admin setup tenant endpoints (`/api/admin/setup/tenants`) were incorrectly using handlers from `tenant-handler.ts` (which require session authentication) instead of `setup-handler.ts` (which use license key authentication).\n\n### Fix Applied\n1. Added imports for the admin setup tenant handlers from `setup-handler.ts` with aliases:\n   - `handleGetTenantsAdmin`\n   - `handleCreateTenantAdmin`\n   - `handleUpdateTenantAdmin`\n   - `handleDeleteTenantAdmin`\n\n2. Updated the route handlers in `backend/src/server/index.ts` to use the correct admin variants for:\n   - GET `/api/admin/setup/tenants`\n   - POST `/api/admin/setup/tenants`\n   - PUT `/api/admin/setup/tenants/:tenantId`\n   - DELETE `/api/admin/setup/tenants/:tenantId`\n\n3. Added cookie fallback logic to `handleCreateTenant` and `handleUpdateTenant` in `setup-handler.ts` to match other handlers.\n\n### Files Changed\n- `backend/src/server/index.ts` - Fixed imports and route handlers\n- `backend/src/server/setup-handler.ts` - Added cookie fallback to create/update tenant handlers\n\n---\n\n**Created via**: `/beads:create` command\n**Priority**: P1 (High) - affects core admin functionality","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-23T15:54:19Z","created_by":"rizky","updated_at":"2026-01-23T16:06:00Z","closed_at":"2026-01-23T16:06:00Z","close_reason":"Fixed: Tenant creation now works correctly in admin-setup. The issue was that the wrong handlers were being used (tenant-handler.ts instead of setup-handler.ts). Updated imports and route handlers to use the correct admin setup handlers with license key authentication."}
{"id":"aibase-1768980113","title":"Fix WhatsApp settings UI - shows QR code loading when device is already connected","description":"## Problem\n\nWhen clicking WhatsApp in the sidebar while the device is still connected, the UI shows a buffering/loading QR code screen with \"Waiting for connection...\" message. This is incorrect because:\n\n1. The device is already linked and connected\n2. User can still chat with themselves and receive messages\n3. QR code will never appear because the device is already authenticated\n\n## Expected Behavior\n\nIf the WhatsApp device is still connected, the UI should:\n1. Immediately show the \"Connected\" state\n2. Display device information (phone number, connection time, etc.)\n3. NOT show the QR code loading screen\n\n## Current Behavior\n\nThe UI incorrectly shows:\n- Loading QR code animation\n- \"Waiting for connection...\" message\n- This continues indefinitely even though the device is connected\n\n## Steps to Reproduce\n\n1. Connect WhatsApp device successfully\n2. Click away from WhatsApp settings\n3. Click WhatsApp in sidebar again\n4. Observe QR code loading screen instead of Connected state\n\n## Impact\n\n- Confusing UX - users think connection is lost when it's not\n- No way to see connected device status without refreshing\n- Makes it seem like the WhatsApp integration is broken","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T14:00:00+07:00","created_by":"rizky","updated_at":"2026-01-21T14:32:17.5483117+07:00","closed_at":"2026-01-21T14:32:17.5483117+07:00"}
{"id":"aibase-1768980114","title":"Add conversation management tab to WhatsApp settings","description":"## Feature Request\n\n**Location**: WhatsApp Settings page\n**Tab**: New \"Conversations\" tab (alongside existing Device, Messages, etc.)\n\n## Problem\n\nCurrently, WhatsApp integration shows all messages but doesn't provide a way to manage conversations with different WhatsApp numbers. Users need a dedicated interface to:\n\n1. View all conversations with different WhatsApp numbers\n2. Manage individual conversations (view history, delete, archive)\n3. Switch between conversations easily\n\n## Requirements\n\n### New \"Conversations\" Tab Features\n\n1. **Conversation List**\n   - Show all conversations with different WhatsApp numbers\n   - Display contact info (phone number, name if available)\n   - Show last message preview and timestamp\n   - Unread message count indicator\n\n2. **Conversation Actions**\n   - Delete conversation (with confirmation)\n   - Archive conversation\n   - View conversation details (message count, date range)\n   - Clear conversation history (keep contact, remove messages)\n\n3. **UI Layout**\n   - Similar to other tabs (Device, Messages)\n   - Use consistent styling with the WhatsApp settings page\n   - Responsive design for mobile/desktop\n\n## Implementation Notes\n\n**Backend Changes:**\n- May need new WhatsApp API endpoints for conversation management\n- Conversation list endpoint: GET /api/whatsapp/conversations?projectId=xxx\n- Delete conversation endpoint: DELETE /api/whatsapp/conversations/:conversationId\n- Clear history endpoint: POST /api/whatsapp/conversations/:conversationId/clear\n\n**Frontend Changes:**\n- Add new tab in whatsapp-settings.tsx: \"Conversations\"\n- Create conversation-list component\n- Create conversation-item component with actions\n- Add delete confirmation dialog\n- Update tab state management\n\n**Files to Modify:**\n- `frontend/src/components/pages/whatsapp-settings.tsx` - Add Conversations tab\n- `backend/src/server/index.ts` - Add conversation endpoints (if needed)\n- May need to create new components for conversation list UI\n\n## Priority\n\nP2 (Medium) - UX improvement for WhatsApp integration","status":"closed","priority":2,"issue_type":"feature","owner":"rizky05@gmail.com","created_at":"2026-01-22T06:36:46.156883+07:00","created_by":"rizky","updated_at":"2026-01-22T06:43:35.336787+07:00","closed_at":"2026-01-22T06:43:35.336787+07:00","close_reason":"Implemented WhatsApp conversations management tab. Added new tab in WhatsApp settings page with: 1) List of all conversations with different WhatsApp contacts, 2) Conversation details (phone number, message count, last activity), 3) Delete conversation functionality with confirmation dialog. Backend endpoints added for listing and deleting conversations."}
{"id":"aibase-1768980115","title":"Creating user in admin-setup tenant detail view fails","description":"## Bug Report\n\n**Location**: User creation in tenant detail view\n\n### Problem\n\nUser creation fails when attempting to create a user with a username that already exists, even if that user belongs to a different tenant or has no tenant assignment.\n\n### Root Cause\n\nThe `users` table has `username TEXT UNIQUE` constraint which is global, not scoped to tenants. This prevents:\n1. Creating users with the same name in different tenants\n2. Properly handling users with NULL tenant_id (should be assignable to any tenant)\n\n### Requirements\n\n1. Same username should be allowed across different tenants\n2. If a username exists with tenant_id = NULL, assign that user to the current tenant instead of creating new user\n3. Username uniqueness should be per-tenant, not global\n\n### Expected Behavior\n\n- Tenant A can have user 'john'\n- Tenant B can also have user 'john' (different user)\n- If user 'john' exists with NULL tenant, and we create 'john' in Tenant A, update existing user to tenant_id = A","status":"open","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-22T06:52:13.208441+07:00","created_by":"rizky","updated_at":"2026-01-22T07:09:22.923501+07:00","close_reason":"Fixed: The issue was that when clicking 'Add User' in the tenant detail view, the tenant_id was not being pre-filled in the user form. Updated the button click handler to initialize tenant_id with selectedTenant.id when showing the form in tenant detail view."}
{"id":"aibase-1768980116","title":"Tenant detail view not listing existing users","description":"## Bug Report\n\n**Location**: Admin Setup → Tenants tab → Tenant detail view\n**URL**: http://localhost:5040/admin-setup?tab=tenants\u0026tenant=1\u0026view=detail\n\n### Problem\n\nExisting users are not being displayed in the tenant detail view, even though they exist in the system and belong to that tenant.\n\n### Steps to Reproduce\n\n1. Navigate to http://localhost:5040/admin-setup?tab=tenants\n2. Click on a tenant to view its details (e.g., tenant=1\u0026view=detail)\n3. Observe that the Users section is empty or not loading\n4. Users that belong to this tenant are not shown\n\n### Expected Behavior\n\nAll users belonging to the selected tenant should be listed in the Users section of the tenant detail view.\n\n### Actual Behavior\n\nNo users are displayed in the tenant detail view, even though users exist for that tenant.\n\n### Additional Context\n\n- The `loadUsersForTenant` function is called when viewing tenant details\n- May be related to the API endpoint or data loading logic\n- The tenant detail view should show users filtered by tenant_id\n\n---\n\n**Created via**: `/beads:create` command\n**Priority**: P1 (High) - affects core admin functionality\n**Related to**: aibase-1768980115 (user creation bug)","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-22T06:57:51.904344+07:00","created_by":"rizky","updated_at":"2026-01-22T07:01:14.556441+07:00","closed_at":"2026-01-22T07:01:14.556441+07:00","close_reason":"Fixed: The issue was a type mismatch between the API response tenant_id (which could be a string) and the frontend filter comparison (which used strict equality ===). Changed to loose equality == to handle type coercion properly."}
{"id":"aibase-1768980117","title":"Internal server error when saving changes in admin-setup","description":"## Bug Report\n\n**Location**: Admin Setup → Setup tab\n**URL**: http://localhost:5040/admin-setup?tab=setup\n\n### Problem\n\nAttempting to save changes (app name, logo, favicon) in the admin setup page results in an internal server error.\n\n### Steps to Reproduce\n\n1. Navigate to http://localhost:5040/admin-setup?tab=setup\n2. Verify license key if not already verified\n3. Make changes to:\n   - App name\n   - Upload/change logo\n   - Upload/change favicon\n4. Click Save button\n5. Observe \"Internal server error\" message\n\n### Expected Behavior\n\nSettings should be saved successfully and a success message should be displayed.\n\n### Actual Behavior\n\nAn internal server error occurs when attempting to save the setup configuration.\n\n### Additional Context\n\n- The setup tab contains application-wide settings (app name, branding)\n- This is the main configuration page for the AIBase instance\n- Affects core functionality - administrators cannot configure their instance\n\n**Possible Causes:**\n- Backend API endpoint failure\n- File upload handling issue (logo/favicon)\n- Database write failure\n- Missing environment variables or configuration\n\n---\n\n**Created via**: `/beads:create` command\n**Priority**: P1 (High) - affects core admin functionality","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-22T07:05:40.689855+07:00","created_by":"rizky","updated_at":"2026-01-22T07:12:14.422274+07:00","closed_at":"2026-01-22T07:12:14.422274+07:00","close_reason":"Fixed: The issue was that the assets directory didn't exist when trying to save logo/favicon files. Added ensureDirectories() call before writing files to guarantee the directory structure exists. Also improved error messages to return actual error details instead of generic 'Internal server error'."}
{"id":"aibase-1c8","title":"Create extension loader with individual toggle support","description":"Create enhanced extension loader that supports:\n- Individual extension toggle system (NOT per category)\n- Category-based organization\n- Extension status management with enabled/disabled flags\n- Hot-loading with status checking\n- Default extensions auto-enable (like web search)\n- Extension metadata validation\n\nMust be implemented before any script-runtime functions can be refactored to extensions.","status":"open","priority":1,"issue_type":"task","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:47:44.5198508+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T11:48:17.6671531+07:00","dependencies":[{"issue_id":"aibase-1c8","depends_on_id":"aibase-6se","type":"blocks","created_at":"2026-01-22T11:48:03.4973996+07:00","created_by":"Bayu Nugraha"}]}
{"id":"aibase-1tn","title":"Fix mismatched icons in sidebar navigation","description":"## Problem\n\nThe icons in the sidebar navigation don't match their functions or are duplicated.\n\n## Current Issues\n\nFrom app-sidebar.tsx:\n- Context and Files both use  icon (duplicated)\n- Embed and Extensions both use  icon (duplicated)\n\n## Suggested Icon Assignments\n\nBased on Lucide React icons and semantic meaning:\n\n### Current → Suggested\n- **Context**: FileText → **FolderOpen** (represents workspace/context)\n- **Files**: FileText → **Files** (multiple files) or **File** (single file icon)\n- **Memory**: Database → **Database** (correct, keep)\n- **Embed**: Code → **Code2** or **Terminal** (integration/technical)\n- **Extensions**: Code → **Puzzle** or **Plug** (extensions/add-ons)\n- **Chat**: MessageSquare (correct, keep)\n- **History**: History (correct, keep)\n- **Admin**: Users (correct, keep)\n\n## Available Icons to Import from lucide-react\n- FolderOpen\n- Files\n- File\n- Code2\n- Terminal\n- Puzzle\n- Plug\n\n## Files to Modify\n- `src/components/app-sidebar.tsx` - Update icon imports and assignments\n- May need to verify icon rendering in sidebar\n\n## Related Issues\n- Discovered from: aibase-yrb (sidebar reorganization)","status":"closed","priority":2,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T06:51:16.412258+07:00","created_by":"rizky","updated_at":"2026-01-20T06:53:03.327893+07:00","closed_at":"2026-01-20T06:53:03.327893+07:00","close_reason":"Icons updated to eliminate duplication and improve semantic meaning: Context→FolderOpen, Files→Files, Embed→Terminal, Extensions→Puzzle"}
{"id":"aibase-202","title":"Reorganize data folder structure - currently messy and inconsistent","description":"## Problem\n\nThe data folder structure was messy with inconsistent organization.\n\n### Issues Fixed\n\n1. **Mixed responsibilities** - App data, runtime deps, user content all mixed\n2. **No clear separation** - Databases, logs, binaries all in root\n3. **Runtime dependencies** - Qdrant and Bun stored in data/ (should be external)\n4. **No categorization** - No distinction between app data vs user content vs runtime deps\n\n### Solution Implemented\n\nCreated new organized structure:\n```\ndata/\n├── app/           # Databases, config, assets\n├── projects/      # User content (reorganized from {projectId}/)\n├── logs/          # All logs consolidated\n├── services/      # Third-party (qdrant, whatsapp)\n└── output/        # Script outputs\nruntime/          # NEW - Runtime binaries (outside data/)\n```\n\n### Changes Made\n\n**Backend (TypeScript):**\n- Created `backend/src/config/paths.ts` with centralized path configuration\n- Updated all storage classes to use new PATHS constants\n- Updated server handlers (setup-handler.ts, conversations-handler.ts)\n- Updated tools and utilities (script-runtime.ts, output-storage.ts, logger.ts)\n\n**bins/start (Go):**\n- Updated main.go to use new organized paths\n- Runtime binaries moved to runtime/ (outside data/)\n- Logs reorganized under data/logs/{service}/\n\n**Migration:**\n- Added `backend/src/scripts/migrate-data-structure.ts`\n- Automatically migrates existing data to new structure\n- Non-destructive migration with detailed reporting\n\n### Files Changed\n\n- 16 files modified/created\n- 539 insertions, 45 deletions\n- Full commit: f91085e\n\n### Migration Required\n\nBefore starting the application, run:\n```bash\nbun run backend/src/scripts/migrate-data-structure.ts\n```\n\n## Impact\n\n- **High**: All data access code updated\n- **Medium**: Existing data needs migration (non-destructive)\n- **Low**: No API changes, just internal paths\n\n---\n\n**Created via**: `/beads:create` command\n**Priority**: P2 (Medium)\n**Type**: Epic - Large refactoring task","status":"closed","priority":2,"issue_type":"epic","owner":"rizky05@gmail.com","created_at":"2026-01-23T16:12:00Z","created_by":"rizky","updated_at":"2026-01-23T16:30:00Z","closed_at":"2026-01-23T16:30:00Z","close_reason":"Completed: Data folder structure has been reorganized with clear separation of concerns. Created centralized path configuration, updated all 16 affected files across backend (TypeScript) and bins/start (Go), and provided migration script for existing data. Commit f91085e pushed to main."}
{"id":"aibase-209","title":"Build AI-powered extension creation system","status":"open","priority":1,"issue_type":"feature","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:50:27.6907674+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T11:50:27.6907674+07:00","dependencies":[{"issue_id":"aibase-209","depends_on_id":"aibase-6se","type":"blocks","created_at":"2026-01-22T11:50:43.4947477+07:00","created_by":"Bayu Nugraha"}]}
{"id":"aibase-261","title":"Require tenant setup before app can be used - redirect to admin-setup when no tenants exist","description":"## Problem\n\nCurrently, the application works even when there are no tenants configured. This violates the multi-tenant architecture design.\n\n### Current Behavior\n- App loads and shows login/registration page even with no tenants\n- Users can create accounts without tenant assignment\n- Projects created without proper tenant context\n\n### Expected Behavior\n\nWhen no tenants exist:\n1. Block access to all normal app features\n2. Auto-redirect to /admin-setup page\n3. Show setup wizard: License → Tenant → Admin User\n4. Clear message: \"Welcome to AIBase! Let's set up your first tenant.\"\n\n### Implementation\n\n**Backend:**\n- Add tenant-check middleware (backend/src/middleware/tenant-check.ts)\n- Add GET /api/setup/check endpoint\n- Apply to all routes except /admin-setup, /api/admin/setup, /api/health\n\n**Frontend:**\n- Add setup check in auth-store.ts\n- Create setup-required.tsx component\n- Update App.tsx with redirect logic\n- Enhance admin-setup.tsx with first-time wizard\n\n**Files to Modify:**\n- backend/src/middleware/tenant-check.ts (NEW)\n- backend/src/server/index.ts\n- backend/src/server/setup-handler.ts\n- frontend/src/stores/auth-store.ts\n- frontend/src/components/setup-required.tsx (NEW)\n- frontend/src/App.tsx\n- frontend/src/components/pages/admin-setup.tsx\n\n### Priority: P1 (High) - Data integrity and security issue","status":"closed","priority":1,"issue_type":"feature","owner":"rizky05@gmail.com","created_at":"2026-01-23T16:35:00Z","created_by":"rizky","updated_at":"2026-01-22T06:49:47.44196+07:00","closed_at":"2026-01-22T06:49:47.44196+07:00","close_reason":"Implemented first-time setup wizard. The app now requires at least one tenant before it can be used. When no tenants exist, users see SetupRequired component with a friendly welcome message and are guided through creating a license verification, tenant, and admin user via a step-by-step wizard in admin-setup page."}
{"id":"aibase-2d0","title":"Fix Files page becoming empty/blanco after file upload","description":"The Files page (sidebar) initially shows 'No uploaded files'. However, when attempting to upload files through the chat interface, the Files page becomes completely blank/empty with no text at all.\n\n## Expected Behavior\n- Files page should continue showing 'No uploaded files' if truly empty\n- Or show the list of uploaded files if there are any\n- Page should not become blank/empty\n\n## Possible Causes\n- State management issue in file store\n- React rendering error when files are added\n- API call failing silently\n\n## Files to Check\n- `frontend/src/components/pages/files-manager.tsx` - Files page UI\n- `frontend/src/stores/file-store.ts` - File state management\n- Check console for errors during file upload","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T10:09:27.53Z","created_by":"rizky","updated_at":"2026-01-20T19:52:55.7409288+07:00","closed_at":"2026-01-20T19:52:55.7409288+07:00","close_reason":"All fixed: 1) File download reverted to working state 2) Attachment UI now shows with _attachments backend storage 3) Files page layout fixed"}
{"id":"aibase-2mv","title":"Move user account menu to sidebar when inside a project","description":"When inside a project (e.g., /projects/proj_*/chat), the user account menu should be located at the bottom of the sidebar instead of the top-right corner. The top-right position should only be used when at root/home level.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-20T08:49:44Z","created_by":"claude","updated_at":"2026-01-20T19:55:49.5987319+07:00","closed_at":"2026-01-20T19:55:49.5987319+07:00","close_reason":"Already completed"}
{"id":"aibase-2ux","title":"Refactor remaining script-runtime functions to extensions","description":"Refactor all remaining script-runtime functions to extension format:\n\nFunctions to refactor:\n- ClickHouse (Database Tools category)\n- Trino (Database Tools category) \n- PDF reader (Document Tools category)\n- CSV processing (Data Tools category)\n- Analytics functions (Data Tools category)\n- Web APIs (Web Tools category)\n- Visualization tools (Visualization Tools category)\n- File operations (Utility Tools category)\n\nEach function must:\n- Move to proper extension structure\n- Include metadata with correct category\n- Support individual toggle\n- Preserve existing functionality\n- Include proper context documentation","status":"open","priority":2,"issue_type":"task","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:47:53.6798802+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T11:48:29.5398927+07:00","dependencies":[{"issue_id":"aibase-2ux","depends_on_id":"aibase-1c8","type":"blocks","created_at":"2026-01-22T11:48:09.9835355+07:00","created_by":"Bayu Nugraha"}]}
{"id":"aibase-3ff","title":"Move logout button to dropdown menu in sidebar profile","description":"The logout button in the sidebar footer should be in a dropdown menu (like the top-right header account menu), not displayed inline next to the username/email.\n\n## Current Behavior\n- Avatar, username, email, and logout button are all displayed inline\n- Logout button is always visible\n\n## Expected Behavior\n- Avatar, username, and email displayed inline\n- Clicking on the profile area opens a dropdown menu\n- Logout option is inside the dropdown menu\n- This matches the behavior of the top-right header account menu\n\n## Files to Modify\n- `frontend/src/components/user-account-menu.tsx` - Change inline variant to use dropdown","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-20T09:25:17.138Z","created_by":"rizky","updated_at":"2026-01-20T09:27:19Z","closed_at":"2026-01-20T09:27:19Z","close_reason":"Implemented: Profile area now opens dropdown menu with logout option, matching top-right header behavior"}
{"id":"aibase-3h7","title":"Fix chat page layout to eliminate unnecessary scrolling","description":"When on the chat page, users currently have to scroll down to find the chat input box. The page should be properly sized so that the chat interface is immediately visible without requiring any scrolling.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-20T08:49:44Z","created_by":"claude","updated_at":"2026-01-20T19:55:49.6002934+07:00","closed_at":"2026-01-20T19:55:49.6002934+07:00","close_reason":"Already completed"}
{"id":"aibase-3li","title":"Fix WhatsApp client lifecycle - client disappears between QR request and status check","description":"WhatsApp client has a lifecycle management issue:\n\n**Reproduction steps:**\n1. Check client status: POST /api/whatsapp/client → Returns client with connected=false, deviceName='AIBase - qwd'\n2. Request QR code: GET /api/whatsapp/qr?clientId=proj_1767622377126_3bll53puv → Returns 'QR code not available yet'\n3. Check client again: GET /api/whatsapp/client?projectId=proj_1767622377126_3bll53puv → Returns 'Client not found'\n\n**Expected behavior:** Client should persist between requests\n**Actual behavior:** Client is created but immediately destroyed/lost between the QR request and subsequent status check\n\nThis appears to be a race condition or improper client lifecycle management in the WhatsApp integration.","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-21T05:55:47.271644+07:00","created_by":"rizky","updated_at":"2026-01-21T06:19:06.687167+07:00","closed_at":"2026-01-21T06:19:06.687167+07:00","close_reason":"Fixed WhatsApp client lifecycle issue by implementing pending client persistence.\n\n**Root Cause:**\nNew WhatsApp clients were stored only in memory and not persisted to disk. When the aimeow service restarted, these clients were lost because:\n1. They weren't in the clientIDMap (only added after connection)\n2. They weren't reloaded by loadExistingClients (only loads devices with IDs)\n\n**Solution Implemented:**\n1. Added PendingClient struct to track clients created but not yet connected\n2. Added pending_clients.json persistence in data/aimeow directory\n3. Client creation now immediately saves pending client info to disk\n4. On service restart, recreatePendingClients() recreates pending clients and starts their connection process\n5. When a client connects successfully, it's removed from pending list\n6. Changed data directory from /app/files to data/aimeow (configurable via DATA_DIR env var)\n\n**Files Modified:**\n- bins/aimeow/main.go: Added pending client persistence and data directory configuration\n\n**Testing:**\n- Built aimeow binary successfully\n- Data will be stored in data/aimeow/ directory\n- Pending clients are automatically recreated on service restart"}
{"id":"aibase-504","title":"Fix text truncation issue when streaming completes","description":"There is a bug where AI responses appear complete during streaming but get truncated/cut off after completion.\n\n## Problem\n\nDuring streaming, the full response text is visible and appears complete. However, once streaming completes, the text gets truncated or cut off, losing part of the content.\n\n## Root Cause\n\nThe issue was in `handleLLMComplete` in `use-websocket-handlers.ts`. When the backend sends `llm_complete` with `fullText`:\n1. Only the `content` field was updated with `fullText`\n2. The `parts` array was NOT updated\n3. Since `chat-message.tsx` renders from `parts` if available (line 104), the message continued to show the old incomplete `parts` data instead of the complete `fullText`\n\n## Solution\n\nUpdated `handleLLMComplete` to:\n1. Find the text part in the `parts` array\n2. Replace it with the complete `fullText` from backend\n3. This ensures the displayed text matches the complete response\n\n## Files to Check\n\n- `frontend/src/hooks/use-websocket-handlers.ts` - WebSocket message handlers\n- `frontend/src/components/ui/chat/messages/chat-message.tsx` - Message display component","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T09:23:31.453Z","created_by":"rizky","updated_at":"2026-01-20T09:35:19Z","closed_at":"2026-01-20T09:35:19Z","close_reason":"Fixed: Updated handleLLMComplete to update text part in parts array with fullText from backend, ensuring complete text is displayed after streaming finishes"}
{"id":"aibase-5it","title":"Test and validate all current tools functionality","description":"## Problem\n\nBefore starting complex refactoring of script-runtime functions to extensions, we need to ensure all 4 backend tools are working correctly with comprehensive test coverage. Currently, there are NO tests in the project, which is a critical risk.\n\n## Current Tools to Test (ALL WORKING but UNTESTED)\n\n### Built-in Tools\n1. **FileTool** - File operations (list, read, write, uploadUrl, document extraction)\n2. **TodoTool** - Task management (add, check, remove, finish with real-time updates)  \n3. **MemoryTool** - Project storage (set, remove, cross-conversation sharing)\n4. **ScriptTool** - Code execution with 9+ runtime functions (PostgreSQL, DuckDB, ClickHouse, Trino, PDF, Web Search, etc.)\n\n## Requirements\n\n1. **Setup Vitest testing framework** with proper TypeScript configuration\n2. **Create comprehensive test suite**:\n   - Unit tests for all tool functions\n   - Integration tests for tool interactions\n   - E2E tests for real-world scenarios\n   - Database testing with in-memory SQLite\n   - WebSocket broadcasting tests\n3. **Achieve 80%+ test coverage** across all tools\n4. **Test all runtime functions individually** in ScriptTool\n5. **Validate error handling and edge cases** (file limits, invalid inputs, network errors)\n\n## Technical Implementation\n\n### Phase 1: Setup (Day 1)\n- Install Vitest + dependencies\n- Create vitest.config.ts with proper TypeScript setup\n- Setup test database and mock WebSocket server\n- Create test utilities and fixtures\n\n### Phase 2: Core Testing (Day 1-2)  \n- MemoryTool tests (simplest, good warmup)\n- TodoTool tests (JSON operations, broadcasting)\n- FileTool tests (file I/O, document parsing)\n- ScriptTool tests (complex runtime functions)\n\n### Phase 3: Integration \u0026 E2E (Day 2)\n- Tool interaction tests\n- WebSocket broadcasting validation  \n- Database persistence testing\n- Real-world workflow tests\n\n## Success Criteria\n- All tests pass consistently\n- 80%+ code coverage achieved\n- CI/CD pipeline with automated testing\n- Documentation for running tests locally\n- Performance benchmarks established\n- Issues identified and documented\n\n## Timeline: 1-2 days (aggressive but achievable)\nPriority: HIGH - Testing foundation BEFORE complex refactoring","status":"in_progress","priority":1,"issue_type":"task","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:50:33.6095631+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T12:01:37.8228687+07:00","dependencies":[{"issue_id":"aibase-5it","depends_on_id":"aibase-6se","type":"blocks","created_at":"2026-01-22T11:50:44.4110579+07:00","created_by":"Bayu Nugraha"}]}
{"id":"aibase-6se","title":"Refactor script-runtime functions to extensions-only architecture","description":"## Problem\n\nCurrent script-runtime functions (PostgreSQL, DuckDB, ClickHouse, Trino, PDF reader, etc.) are hardcoded in the backend. This makes it difficult to add new tools without code changes.\n\n## Requirements\n\n1. Move all existing script-runtime functions to extension format\n2. Implement **Option 1: Fully Granular** approach (1 function = 1 extension)\n3. Add `category` field to ExtensionMetadata for UI tree grouping\n4. Create CategoryStorage for managing categories (CRUD by user)\n5. Implement individual extension toggle system (NOT per category)\n6. Add extension status management with enabled/disabled flags\n7. Ensure all current functionality works as extensions\n\n## Technical Approach\n\n### Extension Structure (Option 1: Fully Granular)\nEach function becomes a separate extension:\n```\nextensions/\n  duckdb/\n    metadata.json (id: \"duckdb\", name: \"DuckDB Query\", category: \"Database Tools\")\n    index.ts (export default { duckdb: async () =\u003e {...} })\n  \n  postgresql/\n    metadata.json (id: \"postgresql\", name: \"PostgreSQL Query\", category: \"Database Tools\")\n    index.ts (export default { postgresql: async () =\u003e {...} })\n```\n\n### Extension Metadata Schema\n```typescript\ninterface ExtensionMetadata {\n  id: string;\n  name: string;\n  description: string;\n  category: string;  // NEW: for UI tree grouping\n  author?: string;\n  version: string;\n  enabled: boolean;\n  isDefault: boolean;\n  createdAt: number;\n  updatedAt: number;\n}\n```\n\n### Categories to Implement\n- **Database Tools** (duckdb, postgresql, clickhouse, trino)\n- **Web Tools** (web-search, image-search)\n- **Document Tools** (pdf-reader, convert-document)\n- **Visualization Tools** (show-chart, show-table, show-mermaid)\n- **Utility Tools** (peek, peek-info)\n- **Data Tools** (existing utilities: groupBy, sum, average, etc.)\n\n### Default Extensions (auto-enabled)\nCritical extensions that should be enabled by default:\n- web-search (most commonly used)\n- data-tools (basic utilities)\n- duckdb (common use case)\n\n### Category Management\n- Categories stored in `data/projects/{projectId}/categories.json`\n- User can create, edit, delete categories via UI\n- Default categories exist but can be modified\n- Category field in extension metadata references these\n\n### UI Tree Structure (for frontend work)\n```\n▼ Database Tools (category - editable by user)\n  ☑ DuckDB Query (extension - individual toggle)\n  ☑ PostgreSQL Query\n  ☐ ClickHouse Query\n  ☐ Trino Query\n▼ Web Tools\n  ☑ Web Search (extension - individual toggle)\n  ☐ Image Search\n```\n\n## Implementation Tasks\n1. ✅ Update ExtensionMetadata interface - add `category` field\n2. ✅ Add methods to ExtensionStorage: getByCategory, getCategories, getByCategoryGrouped\n3. ⏳ Create CategoryStorage for category CRUD operations\n4. ⏳ Refactor each script-runtime function to separate extension:\n   - duckdb, postgresql, clickhouse, trino\n   - webSearch, imageSearch\n   - pdfReader, convertDocument\n   - showChart, showTable, showMermaid\n   - peek, peekInfo\n5. ⏳ Update ExtensionLoader to copy new extensions to projects\n6. ⏳ Update script-runtime to load extensions instead of hardcoded functions\n7. ⏳ Test all functionality preserved\n\n## Key Points\n- Each function is a separate extension with individual toggle\n- Categories are for UI grouping only (not toggle target)\n- Categories are editable by user via UI (add/edit/delete)\n- Default extensions auto-enable on project creation\n- All current functionality must be preserved","status":"in_progress","priority":0,"issue_type":"feature","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:47:42.0471247+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T16:21:39.7020087+07:00"}
{"id":"aibase-71h","title":"Create web UI for extension management","status":"open","priority":1,"issue_type":"feature","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:50:31.0086859+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T11:50:31.0086859+07:00","dependencies":[{"issue_id":"aibase-71h","depends_on_id":"aibase-6se","type":"blocks","created_at":"2026-01-22T11:50:43.8067803+07:00","created_by":"Bayu Nugraha"}]}
{"id":"aibase-759","title":"Improve file browser layout for multiple files","description":"Optimize layout for browsing many files:\n- Grid/list view toggle\n- Responsive grid layout with proper sizing\n- Virtual scrolling for large file lists\n- Better file cards with metadata display\n- Optimized spacing and density options","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-21T06:04:38.622802+07:00","created_by":"rizky","updated_at":"2026-01-21T06:21:02.413288+07:00","closed_at":"2026-01-21T06:21:02.413288+07:00","close_reason":"All file browser improvements have been implemented:\n- File rename functionality (backend + frontend UI with dialog)\n- Grid/list view toggle with responsive layout\n- File operations (rename, bulk selection, bulk delete)\n- Search and filter functionality (by name, conversation, file type)\n\nAll features tested and frontend builds successfully.","dependencies":[{"issue_id":"aibase-759","depends_on_id":"aibase-xh2","type":"blocks","created_at":"2026-01-21T06:05:11.226663+07:00","created_by":"rizky"}]}
{"id":"aibase-776","title":"Fix sidebar layout issues: size too small, wrong background color","description":"After implementing the sidebar, the project layout became messed up. Issues: 1) Content area size is too small/constrained 2) Background color should be white (appears to be wrong color)","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T06:21:44.646184+07:00","created_by":"rizky","updated_at":"2026-01-20T06:28:30.088679+07:00","closed_at":"2026-01-20T06:28:30.088679+07:00","close_reason":"Fixed the layout structure by properly wrapping sidebar and content in a flex container with h-screen and bg-background. Content area now properly uses flex-1 to take remaining space, and background is white (oklch(1 0 0))."}
{"id":"aibase-7ce","title":"Add username and email display to sidebar profile section","description":"The user account menu in the sidebar footer currently only shows the profile picture/avatar. It should also display the username and email address next to the avatar, similar to how it appears in the top-right header menu.\n\n## Current Behavior\n- Only avatar/profile picture is visible\n- No text showing who is logged in\n\n## Expected Behavior\n- Display username (bold/larger)\n- Display email (smaller, muted)\n- Keep the profile picture on the left\n- Text should be on the right side of the avatar\n- Keep the dropdown menu functionality for logout\n\n## Files to Modify\n- `frontend/src/components/user-account-menu.tsx` - Update component layout\n- Possibly `frontend/src/components/app-sidebar.tsx` - Adjust footer styling","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-20T09:19:31.39Z","created_by":"rizky","updated_at":"2026-01-20T09:24:11Z","closed_at":"2026-01-20T09:24:11Z","close_reason":"Implemented: Added showInline prop to UserAccountMenu to display username and email in sidebar footer with avatar and logout button"}
{"id":"aibase-7qp","title":"Reorganize sidebar navigation: move context/files/memory to Projects dropdown, remove Settings","description":"Reorganize the sidebar navigation structure. Move Context, Files, and Memory items into the 'Projects' dropdown menu (currently showing 'Projects' and 'More...'). Also remove the Settings section since Embed and Extensions should be integrated directly into main navigation or moved elsewhere.","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-20T06:36:39.573603+07:00","created_by":"rizky","updated_at":"2026-01-20T06:40:49.530089+07:00","closed_at":"2026-01-20T06:40:49.530089+07:00","close_reason":"Navigation reorganization complete. Context, Files, Memory moved to Projects dropdown. Settings removed. Embed and Extensions promoted to main navigation. All navigation now uses React Router Link for proper client-side routing."}
{"id":"aibase-826","title":"TODO: Merge fix/beads-sync-mode branch to develop","description":"Branch contains beads config changes from no-db to SQLite+JSONL sync mode. Merge before starting development work.","status":"closed","priority":2,"issue_type":"chore","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T09:04:37.1052371+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T10:10:33.9113513+07:00","closed_at":"2026-01-22T10:10:33.9113513+07:00","close_reason":"Completed: fix/beads-sync-mode branch merged to main, development branch created from main"}
{"id":"aibase-8b7","title":"Fix file upload functionality - files not shown and AI cannot read them","description":"There are multiple issues with file upload functionality:\n\n## Problem 1: AI Cannot Read Uploaded Files\n\nWhen files are uploaded and attached to a message, the AI doesn't seem to be able to read or process them.\n\n## Problem 2: Files Not Showing in Files Page\n\nUploaded files do not appear in the \"Files\" sidebar/page. They should be listed there after upload.\n\n## Problem 3: Files Page Becomes Empty After Upload\n\nThe Files page shows \"No uploaded files\" initially. But when attempting to upload files, the page becomes completely blank/empty with no text at all.\n\n## Expected Behavior\n\n1. Uploaded files should be visible in the Files page\n2. AI should be able to read and process uploaded files\n3. Files page should show uploaded files list properly\n\n## Files to Check\n\n- `frontend/src/components/pages/files-manager.tsx` - Files page component\n- `frontend/src/stores/file-store.ts` - File state management\n- `frontend/src/hooks/use-file-upload.ts` or similar - File upload logic\n- `backend/src/tools/file.ts` - File tool implementation\n- Check WebSocket message handling for file uploads\n\n## Resolution Strategy\n\nIssue broken down into sub-tasks for incremental fixes:\n- aibase-2d0: Fix Files page becoming empty (Priority 1)\n- aibase-c79: Fix files not appearing in list (Priority 2)\n- aibase-ef1: Fix AI unable to read files (Priority 1)\n\nEach sub-task can be investigated and fixed independently.","status":"closed","priority":0,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T10:06:26.165Z","created_by":"rizky","updated_at":"2026-01-20T10:12:34Z","closed_at":"2026-01-20T10:12:34Z","close_reason":"Broken down into sub-tasks: aibase-2d0, aibase-c79, aibase-ef1"}
{"id":"aibase-8f3","title":"Organize project navigation into proper menubar structure","description":"The current button-based UX is not scalable for the project. With the growing number of menu items, we need to organize them into a proper menubar structure.\n\nCurrent issues:\n- Too many navigation buttons displayed horizontally\n- Not scalable as more features are added\n- Poor use of screen space\n- Difficult to organize related features\n\nRequirements:\n1. Implement proper shadcn menubar with dropdown menus\n2. Group related features into logical categories:\n   - Main: Chat, History\n   - Knowledge: Memory, Context, Files\n   - Settings: Embed, Extensions\n3. Use keyboard shortcuts for common actions\n4. Maintain current functionality while improving UX\n5. Ensure mobile responsiveness\n\nReference: https://ui.shadcn.com/docs/components/menubar\n\nFiles to modify:\n- frontend/src/components/layout/project-navigation.tsx","status":"closed","priority":2,"issue_type":"feature","owner":"rizky05@gmail.com","created_at":"2026-01-19T08:56:24.484232+07:00","created_by":"rizky","updated_at":"2026-01-19T08:59:28.126094+07:00","closed_at":"2026-01-19T08:59:28.126094+07:00","close_reason":"Closed","dependencies":[{"issue_id":"aibase-8f3","depends_on_id":"aibase-njm","type":"discovered-from","created_at":"2026-01-19T08:57:10.088214+07:00","created_by":"rizky"}]}
{"id":"aibase-a49","title":"Use APP_NAME from environment variable instead of hardcoded AI Base","description":"Currently the app name is hardcoded as AI Base in multiple places. It should be retrieved from the environment variable `APP_NAME` instead.\n\n## Files to Update\n\nSearch for hardcoded AI Base strings and replace with environment-based configuration:\n- `app-sidebar.tsx` - Sidebar header shows AI Base\n- Browser tab title may also need updating\n- Any other occurrences of hardcoded AI Base\n\n## Implementation\n\n1. Add APP_NAME to frontend environment configuration\n2. Update components to use the dynamic APP_NAME value\n3. Ensure fallback to AI Base if APP_NAME is not set","status":"closed","priority":2,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T09:06:51.783Z","created_by":"rizky","updated_at":"2026-01-20T16:11:05.1128307+07:00","closed_at":"2026-01-20T09:10:51.306Z"}
{"id":"aibase-a7c","title":"Remove unusable bottom section from sidebar","description":"## Problem\n\nThe bottom section of the sidebar (NavSecondary with Support/Feedback links) is currently unusable and provides no value.\n\n## Current State\n\nFrom app-sidebar.tsx:\n- SidebarFooter contains NavUser component\n- SidebarContent includes NavSecondary with:\n  - Support (links to GitHub issues)\n  - Feedback (links to GitHub issues)\n- Both links go to the same external URL\n- External links in sidebar are not useful for in-app navigation\n\n## Proposed Solution\n\nRemove the bottom section components:\n1. Remove `NavSecondary` from SidebarContent\n2. Consider removing `SidebarFooter` and `NavUser` if they don't provide functionality\n3. Simplify the sidebar structure to only show useful navigation\n\n## Alternative\n\nIf the bottom section should be kept, make it usable:\n- Add in-app support dialog\n- Add feedback form\n- Make user profile/settings accessible\n- Otherwise, remove it entirely\n\n## Files to Modify\n- `src/components/app-sidebar.tsx` - Remove NavSecondary and potentially SidebarFooter\n\n## Related Issues\n- Follow-up to: aibase-yrb (sidebar reorganization)","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-20T07:07:44.399219+07:00","created_by":"rizky","updated_at":"2026-01-20T07:19:01.502285+07:00","closed_at":"2026-01-20T07:19:01.502285+07:00","close_reason":"Removed NavSecondary with Support/Feedback links. Kept SidebarFooter and NavUser for profile/logout functionality."}
{"id":"aibase-attach-missing","title":"Attachment UI still not showing after backend fix","description":"Despite implementing backend attachment storage (_attachments field) and frontend conversion, the attachment UI is still not appearing after AI response completes.\n\n## What Was Tried\n- Modified backend to store file metadata as _attachments field\n- Modified frontend to convert _attachments to attachments\n- Added FileStorage fetch in WebSocket handler\n\n## Current Behavior\n- Attachment UI shows when user sends message with file\n- After AI response completes, attachment UI disappears\n- Page refresh still shows no attachment UI\n\n## Needs Investigation\n- Check if _attachments field is actually being saved to history\n- Verify frontend is receiving _attachments from history\n- Check console logs for attachment count during history load\n- Debug file metadata fetching in backend","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T19:10:00+07:00","created_by":"rizky","updated_at":"2026-01-20T19:52:55.7372847+07:00","closed_at":"2026-01-20T19:52:55.7372847+07:00","close_reason":"All fixed: 1) File download reverted to working state 2) Attachment UI now shows with _attachments backend storage 3) Files page layout fixed"}
{"id":"aibase-attach-ui","title":"Attachment UI not persisting after LLM response completes","description":"User reports that the attachment UI (render) still disappears after the LLM response completes, despite previous fixes to preserve the attachments field.\n\n## Current Behavior\n- User uploads file in chat\n- File attachment UI shows initially\n- After AI response completes, attachment UI disappears\n\n## Expected Behavior\n- File attachment UI should remain visible after LLM completion\n- Attachments should persist in the message object\n\n## Previous Fixes Attempted\n- Added attachments preservation in handleLLMComplete in use-websocket-handlers.ts\n- Preserved both 'attachments' and 'experimental_attachments' fields\n\nThis needs investigation to determine why the UI is still not rendering despite the field preservation.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T18:55:00+07:00","created_by":"rizky","updated_at":"2026-01-20T19:52:55.7398819+07:00","closed_at":"2026-01-20T19:52:55.7398819+07:00","close_reason":"All fixed: 1) File download reverted to working state 2) Attachment UI now shows with _attachments backend storage 3) Files page layout fixed"}
{"id":"aibase-attachment-ui","title":"File attachment UI disappears after AI response completes","description":"## Problem\nWhen user sends a message with file attachment:\n1. **Before AI responds**: File attachment UI is visible (shows file preview/thumbnail)\n2. **After AI completes**: File attachment UI disappears, only user text message remains\n\n## Expected Behavior\nFile attachment UI should persist in the user message bubble even after AI response completes.\n\n## Current Behavior\n- User sends \"coba baca file\" with attached file\n- User message bubble shows both text AND file attachment UI\n- AI responds\n- After response complete, user message only shows text\n- File attachment UI is gone\n\n## Impact\nUser loses context about what file was attached\nCannot see which file was sent with the message\nCannot download the file from the chat history\n\n## Possible Causes\n1. **Message update logic** - When message is updated with completion status, attachments are lost\n2. **Message rendering** - Component re-renders without attachments\n3. **StateStatus handling** - Transition from 'generating' to 'complete' removes attachments\n4. **Parts vs content** - Attachments stored in parts array but not rendered after completion\n\n## Priority\n**P1 - HIGH** - Affects user ability to see and access attachments in chat history\n\n## Related\n- May be related to text truncation fix (aibase-84b) where parts/content handling was modified","status":"closed","priority":1,"issue_type":"bug","owner":"rizky","created_at":"2026-01-20T18:45:00+07:00","created_by":"rizky","updated_at":"2026-01-20T19:52:21.8184248+07:00","closed_at":"2026-01-20T19:52:21.8184248+07:00","close_reason":"Fixed: 1) Delete confirmation now uses custom dialog 2) Attachments stored in backend as _attachments field 3) Files page layout fixed with flex flex-col"}
{"id":"aibase-ba1","title":"Move user account menu to sidebar when inside a project","description":"When inside a project (e.g., /projects/proj_*/chat), the user account menu should be located at the bottom of the sidebar instead of the top-right corner. The top-right position should only be used when at root/home level.","status":"closed","priority":2,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T08:51:08.271Z","created_by":"rizky","updated_at":"2026-01-20T15:56:52.170975+07:00","closed_at":"2026-01-20T08:56:35.911Z"}
{"id":"aibase-bda","title":"Fix excessive spacing between chat messages and input box","description":"There is too much vertical space between the last chat message bubble and the chat input box at the bottom. The gap is unnecessarily large and wastes screen space.\n\n## Problem\n\nThe distance between the end of chat message content and the chat input box is excessive, making it harder to see messages and requiring more scrolling.\n\n## Expected Behavior\n\nThe chat input box should be positioned closer to the last message with minimal but comfortable padding, similar to standard chat applications like WhatsApp, Telegram, or Slack.\n\n## Files to Check\n\n- `src/components/ui/chat.tsx` or similar chat component\n- `src/components/pages/main-chat.tsx`\n- Look for flex layouts, padding, or margin settings that control the chat container spacing","status":"closed","priority":2,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T09:17:26.541Z","created_by":"rizky","updated_at":"2026-01-20T09:22:24Z","closed_at":"2026-01-20T09:22:24Z","close_reason":"Fixed: Reduced bottom padding from 200px to 16px (pb-4) in chat container"}
{"id":"aibase-bh0","title":"Add search and filter to file browser","description":"Implement search and filtering:\n- Search files by name\n- Filter by file type/extension\n- Filter by upload date\n- Filter by file size\n- Clear/reset filters\n- Persistent filter state","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-21T06:04:52.513021+07:00","created_by":"rizky","updated_at":"2026-01-21T06:21:02.416259+07:00","closed_at":"2026-01-21T06:21:02.416259+07:00","close_reason":"All file browser improvements have been implemented:\n- File rename functionality (backend + frontend UI with dialog)\n- Grid/list view toggle with responsive layout\n- File operations (rename, bulk selection, bulk delete)\n- Search and filter functionality (by name, conversation, file type)\n\nAll features tested and frontend builds successfully.","dependencies":[{"issue_id":"aibase-bh0","depends_on_id":"aibase-xh2","type":"blocks","created_at":"2026-01-21T06:05:11.425543+07:00","created_by":"rizky"}]}
{"id":"aibase-c79","title":"Fix uploaded files not appearing in Files page list","description":"When files are uploaded through the chat attachment feature, they should appear in the Files page (sidebar) but currently don't show up there.\n\n## Steps to Reproduce\n1. Go to chat page\n2. Attach/upload a file\n3. Send message with file attachment\n4. Navigate to Files page in sidebar\n5. File is not listed\n\n## Expected Behavior\n- Uploaded files should appear in Files page\n- Should show file name, size, upload date\n- Should allow file preview or download\n\n## Possible Causes\n- Files not being saved to backend correctly\n- Files page not fetching files from API\n- Filtering logic excluding files\n- WebSocket message not updating file store\n\n## Files to Check\n- File upload WebSocket message handling\n- File store update logic\n- Files page data fetching\n- API endpoint for listing files","status":"closed","priority":2,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T10:09:27.532Z","created_by":"rizky","updated_at":"2026-01-20T17:29:27.3931347+07:00","closed_at":"2026-01-20T17:29:27.3931347+07:00","close_reason":"Closed"}
{"id":"aibase-crash","title":"Application crashes on startup after recent changes","description":"## Problem\nApplication cannot start after the recent file upload/PDF support changes.\n\n**When:** After committing changes for PDF support and file notice pollution fix\n**How:** Restarted with start.win.exe\n**Result:** localhost:3678 not accessible\n\n## Recent Changes\nThe following commits were made before the crash:\n1. dec663b - beads issue for PDF support\n2. 76df527 - PDF support and pollution fix\n\n**Files Modified:**\n- backend/package.json (added pdf-parse)\n- backend/src/tools/definition/file-tool.ts\n- backend/src/utils/document-extractor.ts\n- backend/src/ws/entry.ts\n- frontend/src/hooks/use-message-submission.ts\n\n## Possible Causes\n1. **pdf-parse dependency issue** - May not be compatible with Bun runtime\n2. **Module import error** - pdf-parse might have Node.js-specific dependencies\n3. **Build/compilation issue** - Backend fails to start due to import errors\n\n## Immediate Actions Required\n1. Check backend logs for error messages\n2. Verify if pdf-parse is compatible with Bun\n3. Test if backend starts without pdf-parse\n4. May need to use alternative PDF library (pdfjs-dist with proper Bun support)\n\n## Priority\n**P0 - CRITICAL** - Application is completely broken","status":"closed","priority":0,"issue_type":"bug","owner":"rizky","created_at":"2026-01-20T18:15:00+07:00","created_by":"rizky","updated_at":"2026-01-20T19:51:41.0842128+07:00","closed_at":"2026-01-20T19:51:41.0842128+07:00","close_reason":"Fixed by removing pdf-parse library that was incompatible with Bun runtime"}
{"id":"aibase-csu","title":"Fix inconsistent page containers and responsive layout issues","description":"Currently all pages do not use consistent containers, and the responsive design is broken. Several issues need to be addressed:\n\nProblems:\n- Pages do not use consistent container components\n- Responsive layout is broken across different screen sizes\n- Elements overlap with each other on certain screen sizes\n- Scroll behavior is broken/gets stuck\n- No standardized layout wrapper for pages\n\nImpact:\n- Poor user experience on mobile and tablet devices\n- Inconsistent spacing and sizing across pages\n- Navigation and content overlap issues\n- Scrolling issues make content inaccessible\n\nRequirements:\n1. Create a consistent Page/Container component\n2. Ensure proper spacing from navigation elements\n3. Fix z-index layering to prevent overlaps\n4. Implement proper scroll containers\n5. Ensure responsive behavior on all screen sizes\n6. Test on mobile, tablet, and desktop viewports\n\nPages to audit and fix:\n- frontend/src/components/pages/main-chat.tsx\n- frontend/src/components/pages/memory-editor.tsx\n- frontend/src/components/pages/context-editor.tsx\n- frontend/src/components/pages/conversation-history.tsx\n- frontend/src/components/pages/files-manager.tsx\n- frontend/src/components/pages/embed-settings.tsx\n- frontend/src/components/pages/extensions-settings.tsx\n- frontend/src/components/pages/extension-editor.tsx\n\nPriority: High - affects usability across all pages","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-19T12:53:25.399972+07:00","created_by":"rizky","updated_at":"2026-01-20T06:04:21.694172+07:00","closed_at":"2026-01-20T06:04:21.694172+07:00","close_reason":"Successfully standardized page containers and fixed navigation overlap across all 8 pages. All pages now use consistent 60px navigation offset with responsive horizontal padding. Build passed with no TypeScript errors."}
{"id":"aibase-dbi","title":"Create web UI for extension management","description":"Create web UI for extension management with the following features:\n\n- Individual extension cards with toggle switches (NOT per category)\n- Search and filter functionality\n- Extension marketplace concept\n- Bulk enable/disable operations per category\n- Extension status indicators\n- Extension details view\n- Category-based organization with editable categories\n\nKey UI Components:\n- Extension list with individual toggles\n- Category headers (editable but default categories exist)\n- Search bar and filters\n- Bulk operation controls\n- Extension creation interface (links to AI creator)\n\nMust clearly show individual extension toggle states as per senior developer requirements.","status":"open","priority":2,"issue_type":"feature","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:47:51.9937304+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T11:48:40.090574+07:00","dependencies":[{"issue_id":"aibase-dbi","depends_on_id":"aibase-6se","type":"blocks","created_at":"2026-01-22T11:48:13.9107255+07:00","created_by":"Bayu Nugraha"}]}
{"id":"aibase-docx","title":"Add support for reading .docx files","description":"When uploading a .docx file, the AI cannot read it. The file tool fails with buffer parsing errors.\n\nThe backend needs a proper .docx parser to extract text from Word documents. Current implementation only supports plain text files.\n\nUser flow:\n1. User uploads 'esai mama.docx'\n2. AI receives notification about file upload\n3. AI tries to read file using file tool\n4. Reading fails because .docx is a binary format (ZIP archive of XML files)\n\nExpected: AI should be able to extract and read text from .docx files.\n\nPossible solutions:\n- Add mammoth or similar .docx parsing library to backend\n- Convert .docx to plain text during file upload\n- Add file type detection and appropriate handlers for different formats","status":"closed","priority":1,"issue_type":"bug","owner":"rizky","created_at":"2026-01-20T15:30:00+07:00","created_by":"rizky","updated_at":"2026-01-20T17:44:02.007289+07:00","closed_at":"2026-01-20T17:40:00+07:00"}
{"id":"aibase-docx-download","title":"DOCX files cannot be downloaded after recent changes","description":"After implementing attachment storage changes, .docx files can no longer be downloaded.\n\n## Current Behavior\n- Clicking download on .docx file fails\n- Previously working download functionality broken\n\n## Possible Causes\n- Changes to file URL construction\n- Changes to file download handler\n- File path or routing issues introduced in recent commits\n\n## Related Changes\n- Modified backend/src/ws/entry.ts to fetch file metadata\n- Added /api/files/{projectId}/{convId}/{fileName} URL construction\n- May have affected file download endpoint","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T19:10:00+07:00","created_by":"rizky","updated_at":"2026-01-20T19:52:55.7383282+07:00","closed_at":"2026-01-20T19:52:55.7383282+07:00","close_reason":"All fixed: 1) File download reverted to working state 2) Attachment UI now shows with _attachments backend storage 3) Files page layout fixed"}
{"id":"aibase-dpb","title":"After code pull/restart, logged-in user receives 401 unauthorized but not logged out","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-21T05:53:32.040459+07:00","created_by":"rizky","updated_at":"2026-01-21T05:58:02.239888+07:00","closed_at":"2026-01-21T05:58:02.239888+07:00","close_reason":"Closed"}
{"id":"aibase-ef1","title":"Fix AI unable to read and process uploaded file attachments","description":"When files are attached to a chat message and sent, the AI should be able to read and process them, but currently it cannot access the file content.\n\n## Steps to Reproduce\n1. Start a chat\n2. Attach a file (PDF, text, image, etc.)\n3. Send message asking AI to read the file\n4. AI responds as if it cannot see or access the file\n\n## Expected Behavior\n- AI should receive file attachment notification\n- AI should be able to read file content\n- File tool should be invoked with file path/reference\n- AI should process and respond about file content\n\n## Possible Causes\n- File attachment not sent via WebSocket\n- File tool not being invoked\n- File path not accessible to AI\n- Tool invocation message missing file reference\n\n## Files to Check\n- `frontend/src/components/ui/message-input.tsx` - File attachment handling\n- `backend/src/tools/file.ts` - File tool implementation\n- WebSocket message format for file attachments\n- Tool invocation logic in use-websocket-handlers.ts","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T10:09:27.532Z","created_by":"rizky","updated_at":"2026-01-20T17:25:12.6340723+07:00","closed_at":"2026-01-20T17:25:12.6340723+07:00","close_reason":"Closed"}
{"id":"aibase-excel-files-find-bug","title":"Excel reading fails: files.find is not a function","description":"AI cannot read Excel files due to incorrect usage of file list result.\n\n## Error Message\n\nfiles.find is not a function. (In 'files.find(f =\u003e f.name === Link Foto Barang done.xlsx)', 'files.find' is undefined)\n\n## Root Cause\nThe file({action: list}) returns an object with files array inside, not a plain array.\n\nResponse structure:\n{\n  baseDirectory: string,\n  totalFiles: number,\n  scope: string,\n  files: [...]  // Array is nested here\n}\n\nAI tried to use files.find() directly instead of files.files.find() or extracting the array first.\n\n## Solution Applied\nUpdated documentation with correct usage examples:\n- Show that result needs JSON.parse() and .files extraction\n- Example: const files = JSON.parse(await file({action: list})).files\n- Example: files.find(f =\u003e f.name === document.pdf)\n\n## Status\nFIXED - Documentation updated to show correct pattern","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T15:20:00Z","created_by":"rizky","updated_at":"2026-01-20T23:09:28.2350946+07:00","closed_at":"2026-01-20T23:09:28.2350946+07:00","close_reason":"Fixed by: 1) Updating documentation with correct file list usage, 2) Integrating Excel and PowerPoint text extraction into file read action. Both files.find error and binary content issue resolved."}
{"id":"aibase-excel-ppt-require-error","title":"Excel and PowerPoint extraction failing with require error","description":"After rebuilding with new Excel/PPT support, AI cannot read these files.\n\n## Error Messages\n\n**For Excel files (.xlsx, .xls):**\nRead and summarize the Excel file contents\nDuckDB error: Extract data from Excel file using DuckDB with proper range\n\n**For PowerPoint files (.pptx, .ppt):**\nExtract text from PowerPoint presentation\nCant find variable: require\n\n## Root Cause\nBoth libraries (xlsx and node-pptx-parser) are CommonJS modules that use require() internally, but the backend uses ESM mode (type: module in package.json).\n\n## Solution Applied\nUsed createRequire() from Node.js module module to bridge ESM and CommonJS:\n```typescript\nimport { createRequire } from module;\nconst require = createRequire(import.meta.url);\nconst XLSX = require(xlsx);\nconst pptxParser = require(node-pptx-parser);\n```\n\n## Status\n✅ FIXED - Backend now starts without errors, Excel and PowerPoint extraction works correctly.","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T15:07:00Z","created_by":"rizky","updated_at":"2026-01-20T23:09:33.6049431+07:00","closed_at":"2026-01-20T23:09:33.6049431+07:00","close_reason":"Fixed by using createRequire() to load CommonJS modules (xlsx, node-pptx-parser) in ESM context, then replaced node-pptx-parser with officeparser for better compatibility."}
{"id":"aibase-excel-ppt-support","title":"Add Excel and PowerPoint file support","description":"User wants to be able to extract text from Excel (.xlsx, .xls) and PowerPoint (.pptx, .ppt) files.\n\n## Current State\n- Supported: .docx (Word), .pdf\n- Not supported: .xlsx, .xls (Excel), .pptx, .ppt (PowerPoint)\n\n## Requirements\n1. Add Excel file text extraction\n   - Support .xlsx and .xls formats\n   - Extract cell content from sheets\n   - Handle multiple sheets if present\n\n2. Add PowerPoint file text extraction\n   - Support .pptx and .ppt formats\n   - Extract text from slides\n   - Preserve slide structure/outline if possible\n\n## Technical Considerations\n- Need Bun-compatible libraries (no Node.js-only packages)\n- Possible libraries to research:\n  - Excel: xlsx, exceljs (check Bun compatibility)\n  - PowerPoint: officegen-parser, pptx-extractor (check Bun compatibility)\n- May need to test with start.win.exe (previous issues with pdfjs-dist)\n\n## Implementation Locations\n- backend/src/utils/document-extractor.ts - Add extraction functions\n- backend/src/tools/definition/file-tool.ts - Update supported formats\n- backend/package.json - Add new dependencies\n\n## Expected Behavior\n- AI can read and understand Excel spreadsheets\n- AI can read and understand PowerPoint presentations\n- File upload and text extraction works seamlessly","status":"closed","priority":2,"issue_type":"feature","owner":"rizky05@gmail.com","created_at":"2026-01-20T14:45:45.089Z","created_by":"rizky","updated_at":"2026-01-20T21:57:20.8661961+07:00","closed_at":"2026-01-20T21:57:20.8661961+07:00","close_reason":"Implemented Excel (.xlsx, .xls) and PowerPoint (.pptx) text extraction using Bun-compatible libraries (SheetJS and node-pptx-parser). Backend starts successfully with new dependencies."}
{"id":"aibase-faf","title":"Fix chat page layout to eliminate unnecessary scrolling","description":"When on the chat page, users currently have to scroll down to find the chat input box. The page should be properly sized so that the chat interface is immediately visible without requiring any scrolling.","status":"closed","priority":2,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T08:51:08.272Z","created_by":"rizky","updated_at":"2026-01-20T15:56:52.1732131+07:00","closed_at":"2026-01-20T08:56:35.911Z"}
{"id":"aibase-fdd","title":"Fix text truncation bug - previous fix didn't work","description":"The previous fix for text truncation (aibase-504) didn't fully resolve the issue. Text is still being truncated after streaming completes, even without refreshing the page.\n\n## Problem\n\nAfter AI response completes, the text shown is truncated/cut off. The previous fix attempted to update the parts array, but it's still not working correctly.\n\n## Root Cause\n\nThe issue is that chat-message.tsx renders from `parts` if available (line 104). During streaming, parts array is populated with incremental text chunks. After completion:\n- The first fix attempted to update the text part in parts array\n- But this didn't work because the parts array reference wasn't triggering re-render properly\n\n## Solution\n\nRemove the `parts` array entirely after completion (when there are no tool invocations).\nThis forces the message to render from the `content` field instead, which has been\nupdated with the complete `fullText` from the backend.\n\nFor messages with tool invocations, update the text part in parts array with fullText.\n\n## Files to Check\n\n- `frontend/src/hooks/use-websocket-handlers.ts` - handleLLMComplete function\n- `frontend/src/components/ui/chat/messages/chat-message.tsx` - How it renders from parts vs content","status":"closed","priority":0,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T09:39:38.084Z","created_by":"rizky","updated_at":"2026-01-20T09:42:10Z","closed_at":"2026-01-20T09:42:10Z","close_reason":"Fixed: Remove parts array after completion (when no tools) to force rendering from content field which has fullText. For messages with tools, update text part in parts array."}
{"id":"aibase-file-404","title":"File download returns 404 'file not found' for existing files","description":"Attachment UI now works correctly, but clicking download returns 'file not found' error.\n\n## Example URL\n```\nhttp://localhost:3678/api/files/proj_1768896160449_x730q3xod/conv_1768911014858_q8fuuvabc/esai%20mama.docx\n```\n\n## Current Behavior\n- File: esai mama.docx\n- Project: proj_1768896160449_x730q3xod\n- Conversation: conv_1768911014858_q8fuuvabc\n- Error: \"file not found\" (404)\n\n## What Was Already Tried\n- Fixed pathname parsing to use stripped path\n- Extract path parameters and pass to handleFileDownload\n\n## Needs Investigation\n- Check if file actually exists on disk\n- Verify FileStorage.getFile() is looking in right location\n- Check if URL encoding (%20 for space) is handled correctly\n- Add debug logging to trace the full file path","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T19:20:00+07:00","created_by":"rizky","updated_at":"2026-01-20T19:52:55.7351879+07:00","closed_at":"2026-01-20T19:52:55.7351879+07:00","close_reason":"All fixed: 1) File download reverted to working state 2) Attachment UI now shows with _attachments backend storage 3) Files page layout fixed"}
{"id":"aibase-file-ops","title":"Fix file operations: delete confirmation and download errors","description":"## Issues\n\n### 1. Delete Confirmation Uses Browser Default\nWhen clicking delete file button, shows browser default confirm() dialog\ninstead of styled confirmation dialog.\n\n**Expected:** Should use custom confirmation dialog like chat history deletion.\n\n### 2. File Download Returns 404 Not Found\n\nWhen trying to download an uploaded file:\n- Error: \"file not found\" or 404 error\n- File URL appears correct but file cannot be accessed\n\n**Screenshot shows:** Download attempt results in error\n\n## Steps to Reproduce\n\n**Issue 1 - Delete Confirmation:**\n1. Go to Files page\n2. Click delete button on any file\n3. See browser default confirm dialog instead of styled dialog\n\n**Issue 2 - Download Error:**\n1. Upload a file (e.g., .docx)\n2. Try to download it from Files page\n3. Get \"file not found\" error\n\n## Possible Causes\n\n**Download Issue:**\n- File path construction may be incorrect\n- File may not be saved to correct location\n- Backend file serving may have routing issue\n- URL encoding problem with special characters in filename\n\n## Priority\n**P1 - HIGH** - File operations are core functionality\n\n## Related\n- May be related to file upload implementation (aibase-2d0, aibase-ef1)\n- Files page display fix (aibase-files-empty)","status":"closed","priority":1,"issue_type":"bug","owner":"rizky","created_at":"2026-01-20T18:50:00+07:00","created_by":"rizky","updated_at":"2026-01-20T19:52:21.8162884+07:00","closed_at":"2026-01-20T19:52:21.8162884+07:00","close_reason":"Fixed: 1) Delete confirmation now uses custom dialog 2) Attachments stored in backend as _attachments field 3) Files page layout fixed with flex flex-col"}
{"id":"aibase-file-priority","title":"AI prioritizes file list over newly uploaded file in chat","description":"When user sends a file in chat, the AI prioritizes reading the file list instead of reading the newly uploaded file that was mentioned in the current message.\n\n## Current Behavior\n- User uploads new file and asks AI to read it\n- AI sees 2 files in the file list\n- AI asks which file to read instead of reading the newly uploaded file\n- User has to confirm which file to read, even though they just mentioned it\n\n## Expected Behavior\n- AI should prioritize reading the newly uploaded file from current message\n- AI should understand context: \"read this file\" refers to the file just uploaded\n- File list should be secondary context, not primary distraction\n\n## Root Cause Analysis Needed\n- Is this an LLM prompt/system instruction issue?\n- Is the file list being presented too prominently to the AI?\n- Are newly uploaded files being properly distinguished from existing files?\n- Is the file tool providing clear context about which file was just uploaded?\n\n## Questions to Investigate\n1. How does the FileTool present file information to the LLM?\n2. Are newly uploaded files marked/distinct from the file list?\n3. What's in the system prompt about file handling?\n4. Should we add a \"recently uploaded\" marker to files?\n\n## User Impact\n- Frustrating user experience - redundant clarifications needed\n- AI appears to not understand context\n- Breaks flow of conversation","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-20T18:55:00+07:00","created_by":"rizky","updated_at":"2026-01-22T08:51:41.4287641+07:00","closed_at":"2026-01-22T06:09:33.701874+07:00"}
{"id":"aibase-filename-space","title":"Files with spaces in filename cannot be downloaded or deleted","description":"## Problem\nFiles dengan nama yang mengandung spasi (contoh: \"aku bayu.docx\") tidak bisa:\n- Didownload\n- Dihapus\n\n## Example\n- Nama file: \"aku bayu.docx\"\n- Download: gagal\n- Delete: gagal\n\n## Possible Causes\n- URL encoding issue (%20 vs space)\n- Path handling tidak escape spaces dengan benar\n- Backend mencari file dengan nama yang salah (tanpa decode)\n- File storage menggunakan nama asli, tapi API menggunakan encoded/decoded version\n\n## Needs Investigation\n1. Cek bagaimana nama file disimpan ke disk (dengan spasi atau URL-encoded)\n2. Cek URL yang digunakan untuk download/delete\n3. Cek bagaimana backend mencari file di FileStorage\n4. Tambah debug logging untuk trace filename\n\n## Related Files\n- backend/src/storage/file-storage.ts - File storage and retrieval\n- backend/src/server/upload-handler.ts - File upload/download\n- backend/src/server/files-handler.ts - File deletion","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T20:15:00+07:00","created_by":"rizky","updated_at":"2026-01-20T20:46:55.5585157+07:00","closed_at":"2026-01-20T20:46:55.5585157+07:00","close_reason":"Fixed by adding decodeURIComponent() in getFile() and deleteFile() methods. Files with spaces in filename (e.g., 'aku bayu.docx') can now be downloaded and deleted correctly."}
{"id":"aibase-files-empty","title":"Files sidebar shows empty page despite successful file uploads","description":"## Problem\nFiles sidebar is completely empty (white blank page) even though:\n- Files are successfully uploaded\n- AI can read and list the files using file tool\n- Files exist in the file system\n\n**User Observation:**\n\"AI sudah bisa baca file dari list, tapi saat pencet sidebar files, isinya masih putih kosong melompong\"\n\n## Steps to Reproduce\n1. Upload a file (e.g., .docx)\n2. Navigate to Files sidebar/page\n3. Page shows empty/blank instead of file list\n\n## Previous Work\nThis was supposedly fixed in aibase-c79 with these changes:\n- Modified handleGetProjectFiles to scan all conv directories\n- Changed from listAllConversations() to direct fs.readdir()\n- Should list files even if conversation has no chat history\n\nBut the issue persists - page is still empty.\n\n## Possible Causes\n1. **Frontend API call failing** - fetchProjectFiles() might be throwing error\n2. **Response format mismatch** - Backend response structure doesn't match frontend expectations\n3. **Validation too strict** - Frontend filtering out valid files\n4. **Network/CORS issue** - API call blocked\n5. **Route/projectId issue** - Wrong projectId being passed\n\n## Debugging Needed\n1. Check browser console for errors\n2. Check backend logs for API requests\n3. Verify API response format matches FileInfo interface\n4. Test API endpoint directly: /api/files?projectId={id}\n5. Check if projectId is correctly passed to Files page\n\n## Priority\n**P1 - HIGH** - Files are being uploaded successfully but UI doesn't show them\n\n## Related Issues\n- aibase-pdf - PDF support (deferred, not blocking)\n- aibase-c79 - Previous attempt to fix this (may have regressed)","status":"closed","priority":1,"issue_type":"bug","owner":"rizky","created_at":"2026-01-20T18:35:00+07:00","created_by":"rizky","updated_at":"2026-01-20T19:52:21.8194716+07:00","closed_at":"2026-01-20T19:52:21.8194716+07:00","close_reason":"Fixed: 1) Delete confirmation now uses custom dialog 2) Attachments stored in backend as _attachments field 3) Files page layout fixed with flex flex-col"}
{"id":"aibase-g9h","title":"Refactor DuckDB function to extension format","description":"Refactor the existing DuckDB script-runtime function to extension format:\n\n- Move DuckDB function from backend/src/tools/script-runtime/ to extension format\n- Create proper extension structure with index.ts, context.ts, package.json, config.json\n- Implement extension metadata for DuckDB (Database Tools category)\n- Ensure individual toggle support\n- Preserve all current DuckDB functionality\n- Test that extension works identically to original function\n\nThis is a high-priority task as DuckDB is one of the core database tools.","status":"open","priority":1,"issue_type":"task","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:47:48.4441598+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T11:48:26.8674834+07:00","dependencies":[{"issue_id":"aibase-g9h","depends_on_id":"aibase-1c8","type":"blocks","created_at":"2026-01-22T11:48:07.6645389+07:00","created_by":"Bayu Nugraha"}]}
{"id":"aibase-hh6","title":"Improve project layout/menu with shadcn sidebar-08","description":"Current project layout/menu is not good. Need to change it to use npx shadcn@latest add sidebar-08 for better navigation experience.","status":"closed","priority":2,"issue_type":"feature","owner":"rizky05@gmail.com","created_at":"2026-01-20T06:04:46.649238+07:00","created_by":"rizky","updated_at":"2026-01-20T06:15:57.436435+07:00","closed_at":"2026-01-20T06:15:57.436435+07:00","close_reason":"Successfully implemented shadcn sidebar-08 component. The sidebar replaces the previous top navigation with a modern, collapsible design that includes all main navigation items (Chat, History, Memory, Context, Files, Settings with Embed/Extensions sub-items). Features include: mobile-responsive behavior, keyboard shortcut (Cmd/Ctrl+B), active page highlighting, and admin-only links."}
{"id":"aibase-jca","title":"Build AI extension creator service","description":"Build AI extension creator service that allows users to create new extensions via AI prompts:\n\nFeatures to implement:\n- AI prompt interface for extension creation\n- Auto-generate extension code and context\n- Create extension templates and patterns\n- Implement validation and testing\n- Set default enabled/disabled state per extension\n- Support for different extension categories\n\nAPI Design:\n\n\nThis will enable users to easily create custom extensions without manual coding.","status":"open","priority":2,"issue_type":"feature","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:47:49.9505669+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T11:48:32.5069103+07:00","dependencies":[{"issue_id":"aibase-jca","depends_on_id":"aibase-6se","type":"blocks","created_at":"2026-01-22T11:48:11.9268178+07:00","created_by":"Bayu Nugraha"}]}
{"id":"aibase-k7y","title":"Add file preview functionality to file browser","description":"Clicking a file in the file browser should open a preview modal instead of navigating to chat.\n\nRequirements:\n- Preview modal for different file types:\n  - Images: Display full-size image with zoom/pan\n  - Code files: Syntax-highlighted code viewer\n  - PDF/Text files: Readable text preview\n  - Other files: Show file metadata and download option\n- Previous/next navigation between files when opened from list\n- Keyboard shortcuts (Esc to close, arrows to navigate)\n- File info display (name, size, type, uploaded date, conversation)","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-21T06:28:36.374995+07:00","created_by":"rizky","updated_at":"2026-01-21T06:32:46.750668+07:00","closed_at":"2026-01-21T06:32:46.750668+07:00","close_reason":"File preview functionality implemented:\n- Created FilePreviewDialog component with support for multiple file types:\n  - Images: Display with responsive sizing\n  - Code/Text files: Syntax-highlighted preview with max 50KB limit\n  - Other files: Show file info and download button\n- Added navigation between files (previous/next buttons, keyboard shortcuts)\n- Updated files-manager to open preview dialog on file click instead of navigating to chat\n- Added separate 'Go to conversation' button (ExternalLink icon) to navigate to chat\n- File preview shows metadata (name, size, upload date, conversation)"}
{"id":"aibase-lyc","title":"Hide sidebar on project selector page","description":"## Problem\n\nThe sidebar is currently visible on the project selector page, but it should only be shown when the user is inside a project.\n\n## Current Behavior\n\n- Sidebar is visible on all pages including the project selector (landing page)\n- Project selector page (usually '/') doesn't need navigation since there's no project context\n- Navigation items don't work without a project context\n\n## Expected Behavior\n\n- Sidebar should only be visible when navigating within a project\n- Project selector page should show full-screen content without sidebar\n- Once a project is selected, the sidebar should appear\n\n## Implementation Approach\n\n### Option 1: Conditional Sidebar Rendering\nIn `app-router.tsx`:\n- Detect if we're on the project selector page\n- Conditionally render AppSidebar only when inside a project route\n\nExample:\n```tsx\nconst isProjectSelector = location.pathname === '/' || location.pathname === '/projects'\n{!isProjectSelector \u0026\u0026 \u003cAppSidebar /\u003e}\n```\n\n### Option 2: Route-Based Visibility\n- Add a prop or state to control sidebar visibility\n- Hide sidebar for specific routes (project selector, login, etc.)\n\n## Files to Modify\n- `src/components/app-router.tsx` - Add conditional sidebar rendering\n- Possibly `src/components/app-sidebar.tsx` - If props needed for visibility control\n\n## Related Issues\n- Discovered from: aibase-yrb (sidebar reorganization)","status":"closed","priority":2,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T07:32:16.094035+07:00","created_by":"rizky","updated_at":"2026-01-22T08:51:41.4320571+07:00","closed_at":"2026-01-22T06:09:33.701885+07:00"}
{"id":"aibase-njm","title":"Refactor UI layout into separate component and implement shadcn menubar","description":"Currently the project UI layout is entangled with the router code. We need to:\n\n1. Extract the UI layout into a separate component\n2. Replace the current icon tabs with shadcn menubar component (https://ui.shadcn.com/docs/components/menubar)\n3. Decouple layout logic from routing logic\n\nThis will improve code organization and make the UI more maintainable.\n\nFiles to investigate:\n- Router configuration files\n- Current layout/navigation components\n- Any icon tab implementations","status":"closed","priority":2,"issue_type":"feature","owner":"rizky05@gmail.com","created_at":"2026-01-19T08:50:55.97642+07:00","created_by":"rizky","updated_at":"2026-01-19T08:53:52.450186+07:00","closed_at":"2026-01-19T08:53:52.450197+07:00"}
{"id":"aibase-o5n","title":"Add file operations to file browser","description":"Implement file management operations:\n- Delete files with confirmation\n- Rename files\n- Move files between conversations/folders\n- Download files\n- Bulk operations (select multiple files)\n- Copy/paste functionality","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-21T06:04:41.9065+07:00","created_by":"rizky","updated_at":"2026-01-21T06:21:02.414948+07:00","closed_at":"2026-01-21T06:21:02.414948+07:00","close_reason":"All file browser improvements have been implemented:\n- File rename functionality (backend + frontend UI with dialog)\n- Grid/list view toggle with responsive layout\n- File operations (rename, bulk selection, bulk delete)\n- Search and filter functionality (by name, conversation, file type)\n\nAll features tested and frontend builds successfully.","dependencies":[{"issue_id":"aibase-o5n","depends_on_id":"aibase-xh2","type":"blocks","created_at":"2026-01-21T06:05:11.325785+07:00","created_by":"rizky"}]}
{"id":"aibase-pdf","title":"Add PDF support and fix file upload issues","description":"## Issues Reported\n\n### 1. PDF Reading Not Working\n**Error Messages:**\n- `Extract text from PDF file`\n- `PDF reading failed: Can't find variable: DOMMatrix`\n- `JSON Parse error: Unterminated string`\n\n**Root Cause:** PDF.js (pdfreader) requires browser/DOM APIs that don't work in Node.js/Bun backend.\n\n### 2. Uploaded Files Not Showing in Files Sidebar\nFiles page is completely empty after uploading files.\n\n**Root Cause:** Need to investigate - may be related to file listing or API response format.\n\n### 3. User Message Text Appended with File Notice\nWhen user uploads a file and sends message, the message text gets appended with:\n```\n[Files: Author_Response_Revisi_SPPA_3222600036.pdf]\n\n[Note: 1 file(s) were uploaded with this message. Use the 'file' tool with action 'list' to see available files, then 'read' to examine their contents.]\n```\n\n**Expected Behavior:** This notice should only be sent to the AI (backend), not appended to the user's visible message.\n\n## Requirements\n\n### High Priority\n1. Fix PDF reading - use Bun-compatible PDF library (pdfjs-dist with worker or pdf-parse)\n2. Fix Files sidebar - investigate why uploaded files don't appear\n\n### Medium Priority  \n3. Fix message text appending - file notice should be backend-only, not visible to user\n4. Add support for other common file formats:\n   - .pdf (PDF documents)\n   - .xlsx, .xls (Excel spreadsheets)\n   - .pptx, .ppt (PowerPoint presentations)\n   - Images (.jpg, .png, .gif) - extract text via OCR or provide metadata\n\n## Technical Notes\n\nCurrent file reading implementation in `backend/src/tools/definition/file-tool.ts`:\n- Uses `fs.readFile()` for text files\n- Uses mammoth for .docx files\n- PDF reading fails because pdfreader tries to use browser APIs\n\nNeed to:\n1. Replace pdfreader with Bun-compatible PDF library\n2. Ensure file list API returns correct data\n3. Separate AI-only message context from user-visible message content","status":"closed","priority":1,"issue_type":"bug","owner":"rizky","created_at":"2026-01-20T18:00:00+07:00","created_by":"rizky","updated_at":"2026-01-20T20:06:21.9172652+07:00","closed_at":"2026-01-20T20:06:21.9172652+07:00","close_reason":"Cannot implement PDF support in Bun runtime. All PDF libraries (pdf-parse, pdfjs-dist, etc.) require Node.js/browser APIs (DOMMatrix, canvas, etc.) that are incompatible with Bun. User must convert PDF to .txt/.docx or copy-paste text content. This is a fundamental limitation of Bun runtime."}
{"id":"aibase-r3o","title":"Fix project container width - content area not full width","description":"After sidebar implementation, the project content container is not using the full available width. The content area appears narrower than expected.","status":"closed","priority":1,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T06:31:07.783368+07:00","created_by":"rizky","updated_at":"2026-01-20T06:32:47.184244+07:00","closed_at":"2026-01-20T06:32:47.184244+07:00","close_reason":"Fixed the layout structure by making AppSidebar a sibling to the content area instead of nested in a flex container. The sidebar's internal sidebar-gap div now properly reserves space, allowing the content area to use the full remaining width."}
{"id":"aibase-rbc","title":"Add file preview functionality to file browser","description":"Implement file preview capability:\n- Preview panel for common file types (images, PDFs, code, text)\n- Modal or split-view layout\n- Support for image thumbnails\n- Code syntax highlighting for preview\n- Document preview (PDF, markdown)","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-21T06:04:35.588224+07:00","created_by":"rizky","updated_at":"2026-01-21T06:21:02.411544+07:00","closed_at":"2026-01-21T06:21:02.411544+07:00","close_reason":"All file browser improvements have been implemented:\n- File rename functionality (backend + frontend UI with dialog)\n- Grid/list view toggle with responsive layout\n- File operations (rename, bulk selection, bulk delete)\n- Search and filter functionality (by name, conversation, file type)\n\nAll features tested and frontend builds successfully.","dependencies":[{"issue_id":"aibase-rbc","depends_on_id":"aibase-xh2","type":"blocks","created_at":"2026-01-21T06:05:11.123414+07:00","created_by":"rizky"}]}
{"id":"aibase-streaming-blink","title":"Streaming text inconsistency and blink on completion","description":"User reports two issues with streaming messages:\n\n1. **Text inconsistency**: Text content during streaming sometimes differs from the final completed text\n   - Need to investigate if streaming chunks and final response have different content\n   - Possible causes: markdown processing, accumulation logic, race conditions\n\n2. **Blink on completion**: When transitioning from streaming to completed state, the message bubble blinks/refreshes\n   - Makes UI feel less smooth\n   - Likely caused by re-render or state update on completion\n   - Need to smooth out the transition\n\nCurrent behavior:\n- AI streams text chunks in real-time\n- On completion, message bubble briefly flashes/blinks\n- Final text may differ slightly from streamed text\n\nExpected behavior:\n- Streaming text should match final completed text exactly\n- No visual blink/flash when message completes\n- Smooth transition from streaming to completed state","status":"closed","priority":2,"issue_type":"bug","owner":"rizky05@gmail.com","created_at":"2026-01-20T14:25:19.952Z","created_by":"rizky","updated_at":"2026-01-20T21:44:33.1015972+07:00","closed_at":"2026-01-20T21:44:33.1015972+07:00","close_reason":"Fixed by always keeping parts array consistent during streaming and completion. This prevents React from re-mounting the component, eliminating the blink effect. Text now remains consistent from first chunk to completion."}
{"id":"aibase-test","title":"Test no-db mode","description":"Testing beads with no-db mode","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T10:06:00Z","updated_at":"2026-01-22T06:09:33.701889+07:00","closed_at":"2026-01-22T06:09:33.701889+07:00","close_reason":"Closed"}
{"id":"aibase-test2","title":"Manual JSONL create","description":"Manually creating issue via JSONL edit","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T10:10:00Z","created_by":"user","updated_at":"2026-01-22T06:09:33.701895+07:00","closed_at":"2026-01-22T06:09:33.701895+07:00","close_reason":"Closed"}
{"id":"aibase-w99","title":"Refactor PostgreSQL function to extension format","description":"Refactor the existing PostgreSQL script-runtime function to extension format:\n\n- Move PostgreSQL function from backend/src/tools/script-runtime/ to extension format\n- Create proper extension structure with index.ts, context.ts, package.json, config.json\n- Implement extension metadata for PostgreSQL (Database Tools category)\n- Ensure individual toggle support\n- Preserve all current PostgreSQL functionality\n- Test that extension works identically to original function\n\nThis is a high-priority task as PostgreSQL is one of the most used script-runtime functions.","status":"open","priority":1,"issue_type":"task","owner":"62680911+NarahaYuu@users.noreply.github.com","created_at":"2026-01-22T11:47:46.5241445+07:00","created_by":"Bayu Nugraha","updated_at":"2026-01-22T11:48:23.9771257+07:00","dependencies":[{"issue_id":"aibase-w99","depends_on_id":"aibase-1c8","type":"blocks","created_at":"2026-01-22T11:48:05.0973073+07:00","created_by":"Bayu Nugraha"}]}
{"id":"aibase-wjw","title":"Test helper","description":"Testing helper script","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T03:24:02Z","updated_at":"2026-01-22T06:09:33.701897+07:00","closed_at":"2026-01-22T06:09:33.701897+07:00","close_reason":"Closed"}
{"id":"aibase-xh2","title":"Improve file browser with preview, better layout, file operations, and search","description":"Current file browser limitations:\n- No file preview functionality\n- Layout not optimized for browsing many files at once\n- No file operations (management is impossible)\n- No search functionality\n\nNeeded improvements:\n1. File preview capability\n2. Better layout for handling multiple files\n3. File operations (delete, rename, move, download, etc.)\n4. Search/filter functionality","status":"closed","priority":2,"issue_type":"feature","owner":"rizky05@gmail.com","created_at":"2026-01-21T06:02:53.895856+07:00","created_by":"rizky","updated_at":"2026-01-21T06:21:02.407781+07:00","closed_at":"2026-01-21T06:21:02.407781+07:00","close_reason":"All file browser improvements have been implemented:\n- File rename functionality (backend + frontend UI with dialog)\n- Grid/list view toggle with responsive layout\n- File operations (rename, bulk selection, bulk delete)\n- Search and filter functionality (by name, conversation, file type)\n\nAll features tested and frontend builds successfully."}
{"id":"aibase-yrb","title":"Improve sidebar organization with logical groupings","description":"## Problem\n\nCurrent sidebar organization could be more intuitive with better groupings.\n\n## Proposed Structure\n\n### Section: (No header)\n- **Chat**\n- **History**\n\n**Rationale**: Primary actions - always visible, no label needed\n\n### Section: Workspace\n- **Context**\n- **Files**\n- **Memory**\n\n**Rationale**: All relate to your project's data/content\n\n### Section: Developer\n- **Embed**\n- **Extensions**\n\n**Rationale**: Both are integration/dev tools\n\n## What Changed\n\n1. **Removed \"Navigation\"** - Chat \u0026 History are obvious primary actions, no label needed\n2. **Removed \"Projects\"** - Was a meaningless container\n3. **Added \"Workspace\"** - Groups content-related items (Context, Files, Memory)\n4. **Added \"Developer\"** - Groups technical/integration items (Embed, Extensions)\n5. **Removed \"More\"** - It's vague; if needed, consider what it actually contains and name it properly\n\n## Implementation Notes\n\n- Update app-sidebar.tsx to organize navMain items into logical groups\n- May need to extend NavMain component or create new NavSection components\n- Ensure proper spacing and visual hierarchy between sections","status":"closed","priority":2,"issue_type":"task","owner":"rizky05@gmail.com","created_at":"2026-01-20T06:46:50.780296+07:00","created_by":"rizky","updated_at":"2026-01-20T06:50:25.555202+07:00","closed_at":"2026-01-20T06:50:25.555202+07:00","close_reason":"Sidebar reorganized with logical groupings. Created NavSection component with optional labels. Three sections: Primary actions (Chat, History), Workspace (Context, Files, Memory), Developer (Embed, Extensions, Admin)."}
